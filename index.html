<!doctype html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>بازار سکه‌های بازی</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { font-family: system-ui, sans-serif; }
  </style>
</head>
<body class="bg-gray-50 text-gray-800">

<!-- AUTH MODAL -->
<div id="authSection" class="fixed inset-0 flex items-center justify-center bg-gray-100 z-50">
  <div class="bg-white shadow-lg rounded-xl w-full max-w-md p-6 text-center">
    <h1 class="text-2xl font-bold text-indigo-600 mb-4">ورود به بازار سکه‌های بازی</h1>

    <div class="flex justify-center gap-4 mb-4">
      <button id="loginTab" class="px-4 py-2 bg-indigo-600 text-white rounded-lg">ورود</button>
      <button id="registerTab" class="px-4 py-2 bg-gray-200 rounded-lg">ثبت‌نام</button>
    </div>

    <!-- Login form -->
    <form id="loginForm" class="space-y-3">
      <input id="loginUser" type="text" placeholder="نام کاربری" required class="w-full p-2 border rounded-lg">
      <input id="loginPass" type="password" placeholder="رمز عبور" required class="w-full p-2 border rounded-lg">
      <button type="submit" class="w-full bg-indigo-600 text-white py-2 rounded-lg">ورود</button>
    </form>

    <!-- Register form -->
    <form id="registerForm" class="hidden space-y-3">
      <input id="regUser" type="text" placeholder="نام کاربری" required class="w-full p-2 border rounded-lg">
      <input id="regPass" type="password" placeholder="رمز عبور" required class="w-full p-2 border rounded-lg">
      <button type="submit" class="w-full bg-green-600 text-white py-2 rounded-lg">ثبت‌نام</button>
    </form>
  </div>
</div>

<!-- MAIN SITE -->
<div id="mainSite" class="hidden">
  <header class="bg-white shadow-sm sticky top-0 z-40">
    <div class="max-w-5xl mx-auto px-4 py-3 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <div class="w-10 h-10 bg-indigo-600 rounded-md flex items-center justify-center text-white font-bold">س</div>
        <div>
          <h1 class="text-lg font-semibold">بازار OXM</h1>
          <p class="text-sm text-gray-500">خرید و فروش امن سکهٔ بازی </p>
        </div>
      </div>
      <button id="logoutBtn" class="px-4 py-2 bg-red-500 text-white rounded-lg">خروج</button>
    </div>
  </header>

  <main class="max-w-5xl mx-auto px-4 py-12">
    <section class="text-center">
      <h2 class="text-3xl md:text-4xl font-extrabold leading-tight">بازار امن خرید و فروش <span class="text-indigo-600">OXM</span></h2>
      <p class="mt-4 text-gray-600">ما در حال ساخت پلتفرمی هستیم که بازیکنان بتوانند سکه و آیتم‌های بازی خود را به‌صورت امن خرید و فروش کنند.</p>
      
      <div class="mt-6 flex justify-center gap-4">
        <a href="https://rubika.ir/Gosettaki" target="_blank" class="px-5 py-3 bg-indigo-600 text-white rounded-lg shadow hover:bg-indigo-700 transition">ثبت آگهی</a>
        <a href="https://bobarbini-stack.github.io/TRON1/" target="_blank" class="px-5 py-3 bg-gray-500 text-white rounded-lg shadow hover:bg-gray-600 transition">مشاهده آگهی</a>
      </div>
    </section>

    <section id="market-items" class="max-w-5xl mx-auto mt-12">
      <h2 class="text-2xl font-bold mb-6 text-center">ایتم‌های بازار</h2>

      <div class="bg-white p-4 rounded-lg shadow mb-4 flex justify-between items-center">
        <div>
          <p class="font-semibold">خرید 80CP</p>
          <span class="text-sm text-gray-500">قیمت: 95,000 تومان</span>
        </div>
        <button class="buyBtn px-4 py-2 bg-green-600 text-white rounded-lg">خرید</button>
      </div>

      <div class="bg-white p-4 rounded-lg shadow mb-4 flex justify-between items-center">
        <div>
          <p class="font-semibold">خرید 160CP</p>
          <span class="text-sm text-gray-500">قیمت: 185,000 تومان</span>
        </div>
        <button class="buyBtn px-4 py-2 bg-green-600 text-white rounded-lg">خرید</button>
      </div>

      <div class="bg-white p-4 rounded-lg shadow mb-4 flex justify-between items-center">
        <div>
          <p class="font-semibold">خرید 240CP</p>
          <span class="text-sm text-gray-500">قیمت: 290,000 تومان</span>
        </div>
        <button class="buyBtn px-4 py-2 bg-green-600 text-white rounded-lg">خرید</button>
      </div>
    </section>

    <!-- SUPPORT INFO FOOTER -->
    <div class="max-w-5xl mx-auto mt-12 p-4 text-center text-gray-500 text-sm">
      اگر پشتیبانی روبیکا جوابی نداد، از ایمیل 
      <a href="mailto:sweetwantad@gmail.com" class="text-indigo-600">sweetwantad@gmail.com</a> 
      پیام دهید جهت همکاری و تبلیغات هم  پیام دهدید
    </div>
  </main>
</div>

<!-- BUY MODAL -->
<div id="buyModal" class="fixed inset-0 bg-black/50 flex items-center justify-center hidden z-50">
  <div class="bg-white rounded-2xl shadow-lg p-6 w-96">
    <h3 id="modalTitle" class="text-lg font-bold mb-2">خرید آیتم</h3>
    <p id="modalText" class="text-gray-600 text-sm leading-relaxed"></p>

    <div class="mt-6 flex justify-end gap-3">
      <button id="closeModal" class="px-4 py-2 bg-gray-200 rounded-lg">بستن</button>
      <a href="https://rubika.ir/Gosettaki" target="_blank" class="px-4 py-2 bg-indigo-600 text-white rounded-lg">پشتیبانی</a>
    </div>
  </div>
</div>

<script>
  let users = {};
  let loggedInUser = null;

  const authSection = document.getElementById("authSection");
  const mainSite = document.getElementById("mainSite");
  const loginForm = document.getElementById("loginForm");
  const registerForm = document.getElementById("registerForm");
  const loginTab = document.getElementById("loginTab");
  const registerTab = document.getElementById("registerTab");
  const logoutBtn = document.getElementById("logoutBtn");
  const buyModal = document.getElementById("buyModal");
  const modalTitle = document.getElementById("modalTitle");
  const modalText = document.getElementById("modalText");
  const closeModalBtn = document.getElementById("closeModal");
  const buyButtons = document.querySelectorAll(".buyBtn");

  window.onload = function() {
    const savedUser = localStorage.getItem("loggedInUser");
    if(savedUser) enterSite(savedUser);
  };

  loginTab.onclick = () => { loginForm.classList.remove("hidden"); registerForm.classList.add("hidden"); };
  registerTab.onclick = () => { registerForm.classList.remove("hidden"); loginForm.classList.add("hidden"); };

  registerForm.onsubmit = function(e){
    e.preventDefault();
    const user = document.getElementById("regUser").value;
    const pass = document.getElementById("regPass").value;
    if(users[user]) { alert("این نام کاربری قبلاً ثبت شده است!"); return; }
    users[user] = pass;
    alert("ثبت‌نام موفق شد. حالا وارد شوید.");
    loginForm.classList.remove("hidden");
    registerForm.classList.add("hidden");
  };

  loginForm.onsubmit = function(e){
    e.preventDefault();
    const user = document.getElementById("loginUser").value;
    const pass = document.getElementById("loginPass").value;
    if(!users[user]) { alert("نام کاربری وجود ندارد!"); return; }
    if(users[user] !== pass) { alert("رمز اشتباه است!"); return; }
    enterSite(user);
  };

  function enterSite(user){
    loggedInUser = user;
    localStorage.setItem("loggedInUser", user);
    authSection.classList.add("hidden");
    mainSite.classList.remove("hidden");
  }

  logoutBtn.onclick = () => { localStorage.removeItem("loggedInUser"); location.reload(); };

  buyButtons.forEach((btn,i)=>{
    const items = ["80CP","160CP","240CP"];
    const prices = [95000,185000,290000];
    btn.onclick = function(){
      modalTitle.textContent = `خرید ${items[i]}`;
      modalText.innerHTML = `
        شما می‌توانید با پرداخت <strong>${prices[i].toLocaleString()} تومان</strong> این آیتم (${items[i]}) را دریافت کنید.<br><br>
        شماره کارت: <strong>5022291538200393</strong><br>
        به نام: حسین سیمیاری<br>
        آیدی روبیکا جهت پشتیبانی: <strong>Gosettaki@</strong>
      `;
      buyModal.classList.remove("hidden");
    }
  });

  closeModalBtn.onclick = () => { buyModal.classList.add("hidden"); };
</script>

</body>
  </html>
